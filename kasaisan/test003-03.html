<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>test003-03</title>
<script>
  var canvas1, ctx1;
  var inv1;
  
  function draw() {
    canvas1 = document.getElementById('CANVAS1');
    ctx1 = canvas1.getContext('2d');
    
    draw1();
    inv1 = setInterval(function() {
      draw1();
    }, 2000);
  }
  function stop() {
    clearInterval(inv1);
    ctx1.clearRect(0, 0, 500, 500);
    document.getElementById('log').innerHTML = "";
  }
  function draw1() {
    ctx1.clearRect(0, 0, 500, 500);
    var sum = 0, sumFill = 0, total = 0;
    for (var x=10; x<=490; x+=10) {
      for(var y=10; y<=490; y+=10) {
        ctx1.beginPath();
        ctx1.arc(x, y, 4, 0, Math.PI*2, false);
        if (Math.random() * 10 > 5) {
          ctx1.stroke();
          sum++;
        } else {
          ctx1.fill();
          sumFill++;
        }
      }
    }
    total = sum + sumFill;
    document.getElementById('log').innerHTML = sum + ", " + sumFill + " = " + total + "<br />"
                                             + document.getElementById('log').innerHTML;
  }
</script>
</head>
<body>
線、円
<input type="button" value="START" onClick="draw();">
<input type="button" value="STOP" onClick="stop();"><br />
<canvas id="CANVAS1" style="background-color: #FFFF99;" width="500" height="500"></canvas>
<div id="log"></div>
</body>
</html>